<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="utf-8" />
        <title>简书-MarkDown编辑器</title>
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="../css/editormd.css" />
        <link rel="shortcut icon" href="https://pandao.github.io/editor.md/favicon.ico" type="image/x-icon" />
        <script src="js/jquery.min.js"></script>
        <script src="../editormd.js"></script>
    </head>
    <body>
        <div id="layout">
            <header>
                <h1>Simple example</h1>
                <input type="text" placeholder="问题标题"  class="form-control" ng-model="askQuestion.title">
                <input type="text" placeholder="所属话题"  class="form-control"  ng-model="askQuestion.topicName">
            </header>
            <div id="test-editormd">

                <textarea style="display:none;" ng-model="askQuestion.content">[TOC]

                    #### Disabled options

                    - TeX (Based on KaTeX);
                    - Emoji;
                    - Task lists;
                    - HTML tags decode;
                    - Flowchart and Sequence Diagram;

                    #### Editor.md directory

                        editor.md/
                                lib/
                                css/
                                scss/
                                tests/
                                fonts/
                                images/
                                plugins/
                                examples/
                                languages/
                                editormd.js
                                ...

                    ```html
                    &lt;!-- English --&gt;
                    &lt;script src="../dist/js/languages/en.js"&gt;&lt;/script&gt;

                    &lt;!-- 繁體中文 --&gt;
                    &lt;script src="../dist/js/languages/zh-tw.js"&gt;&lt;/script&gt;
                    ```
                </textarea >
            </div>
            <button  class="btn btn-primary " ng-click="newAsk(askQuestion)">提交问题</button>

        </div>

        <script type="text/javascript">
			var testEditor;

            $(function() {
                testEditor = editormd("test-editormd", {
                    width   : "90%",
                    height  : 640,
                    syncScrolling : "single",
                    path    : "../lib/"
                });

                /*
                // or
                testEditor = editormd({
                    id      : "test-editormd",
                    width   : "90%",
                    height  : 640,
                    path    : "../lib/"
                });
                */
            });


            app.controller('WriteController', function ($scope, $http) {

                var user=JSON.parse(sessionStorage.getItem('user'));

                /**
                 * 提问*/
                $scope.newAsk=function (askQuestion) {
                    //  alert("wwww");
                    $http({
                        method:'POST',
                        url:'http://localhost:8080/newQuestion',
                        data: {
                            "account": user.account,
                            "title":askQuestion.title,
                            "topicId": 1,
                            "content": askQuestion.content
                        },
                        params:{
                            topicName:askQuestion.topicName
                        }
                    }).success(function (data) {
                        //  alert("success");
                        swal({
                            title:"提问成功",
                            type:"success",
                            timer:1000,
                            showConfirmButton:false

                        });
                        setTimeout(function () {
                            window.location.reload();
                        },1200);
                    });
                }


            })

        </script>
    </body>
</html>