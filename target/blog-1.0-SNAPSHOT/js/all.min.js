var app=angular.module("myapp",["ngSanitize"]);
marked.setOptions({
    renderer:new marked.Renderer,gfm:!0,tables:!0,breaks:!1,pedantic:!1,
    sanitize:!1,smartLists:!0,smartypants:!1,highlight:
        function(t){
        return hljs.highlightAuto(t).value
    }
}),
    app.controller("MarkdownController",["$scope","$http",function(t){t.inputText="",
        t.$watch("inputText",function(e){t.outputText=marked(e)}),
        t.clean=function() {
        t.inputText=""
        }}]).directive("tab",
        function(){
        return{restrict:"A",link:
            function(t,e,n){
        e.on("keydown",
            function(t){var n=t.keyCode||t.which;if(9===n){t.preventDefault();
        var i=this.selectionStart,
            r=this.selectionEnd;e.val(e.val().substring(0,i)+"	"+e.val().substring(r)),
                this.selectionStart=this.selectionEnd=i+1,e.triggerHandler("change")
        }})}}

            var user=JSON.parse(sessionStorage.getItem('user'));

            /**
             * 提问*/
            $scope.newAsk=function (askQuestion) {
                //  alert("wwww");
                $http({
                    method:'POST',
                    url:'http://localhost:8080/newQuestion',
                    data: {
                        "account": user.account,
                        "title":askQuestion.title,
                        "topicId": 1,
                        "content": askQuestion.content
                    },
                    params:{
                        topicName:askQuestion.topicName
                    }
                }).success(function (data) {
                    //  alert("success");
                    swal({
                        title:"提问成功",
                        type:"success",
                        timer:1000,
                        showConfirmButton:false

                    });
                    setTimeout(function () {
                        window.location.reload();
                    },1200);
                });
            }


        });
