<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="referrer" content="always">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="track" content="{&quot;pid&quot;:&quot;i&quot;,&quot;disabled&quot;:true}">
    <link rel="stylesheet" href="./css/skeleton.css">
    <link rel="stylesheet" href="./css/content_toolbar.css">
    <link href="./css/app.f9fc3bdf5d6cce499d6893ef6119986f.css" rel="stylesheet">
    <title>我的收藏-个人中心-CSDN</title>
    <link rel="stylesheet" type="text/css" href="./css/check-adb.css">
    <link href="./css/WdatePicker.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="./css/check-adb.css">
</head>
<body>

<div id="head" class="csdn-toolbar tb_disnone  csdn-toolbar-skin-black "></div>

<div id="app"><!---->
    <div data-v-357a65ed="" class="container view">
        <div data-v-357a65ed="" class="left_box" id="left"></div>
        <div data-v-357a65ed="" class="view-container">
            <div data-v-693a9050="" data-v-357a65ed="" class="collection clearfix view" id="editCollectShow">
                <div data-v-693a9050="" class="collection-tab">
                    <h3 data-v-693a9050="">
                        <div data-v-693a9050="" class="collection-head" style="display: block" id="favoritesShow">
                            <a data-v-693a9050="" href="#" tabindex="1" class="tab-title active">我创建的收藏夹</a>
                            <a data-v-693a9050="" href="#" tabindex="2" class="tab-title">我关注的收藏夹</a>
                            <a data-v-693a9050="" href="#" class="collect-add" style="" onclick="insertCollectOnclick()">
                                <span data-v-693a9050="">+</span>
                                新建收藏夹
                            </a>
                        </div>
                        <a data-v-693a9050="" href="collect_center.html" class="tab-title" style="display: none;"
                           id="collectShow">
                            返回收藏夹列表
                        </a>
                    </h3>
                </div>
                <div data-v-693a9050="" class="collection-content">
                    <ul data-v-198f248e="" data-v-693a9050="" class="collection-list" id="favorites"
                        style="display: block">

                    </ul>
                </div>
                <!--新增收藏夹信息开始-->
                <div data-v-2a98e4d1="" data-v-693a9050="" id="el-dialog" class="dialog-containter containter-skin"
                     style="width: 462px; min-height: 210px; display: none;">
                    <div data-v-2a98e4d1="" class="containter-top">
                        <div data-v-693a9050="" data-v-2a98e4d1="">
                            <span data-v-693a9050="" data-v-2a98e4d1="">编辑收藏夹</span>
                        </div>
                    </div>
                    <div data-v-2a98e4d1="" class="containter-content">
                        <div data-v-693a9050="" data-v-2a98e4d1="">
                            <form data-v-693a9050="" class="el-form el-form-skin" data-v-2a98e4d1="">
                                <div data-v-693a9050="" class="form-control clearfix">
                                    <label data-v-693a9050="" class="form-label">标题</label>
                                    <div data-v-693a9050="" class="el-form-item is-required"><!---->
                                        <div class="el-form-item__content">
                                            <div data-v-693a9050="" class="form-input el-input"><!---->
                                                <input type="text" autocomplete="off" placeholder="请填写收藏夹的名称"
                                                       class="el-input__inner" id="favorites_title">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div data-v-693a9050="" class="form-control clearfix">
                                    <label data-v-693a9050="" class="form-label">描述（选填）</label>
                                    <div data-v-693a9050="" class="el-form-item">
                                        <div class="el-form-item__content">
                                            <div data-v-693a9050="" class="form-textarea el-textarea">
                                                <textarea autocomplete="off" rows="4" placeholder="请输入描述内容"
                                                          class="el-textarea__inner" style="min-height: 39px;"
                                                          id="favorites_desc"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div data-v-2a98e4d1="" class="containter-bottom">
                        <div data-v-693a9050="" data-v-2a98e4d1="" class="form-button">
                            <button data-v-693a9050="" data-v-2a98e4d1="" id="btn-reset" class="btn">取消</button>
                            <button data-v-693a9050="" data-v-2a98e4d1="" id="btn-confirm" class="btn primary-btn"
                                    onclick="insertFavorites()">确定
                            </button>
                        </div>
                    </div>
                </div>
                <div class="dialog-mark" id="dialog-mark" style="display: none"></div>
                <!--新增收藏夹信息结束-->

                <!--修改收藏夹信息开始-->
                <div data-v-2a98e4d1="" data-v-693a9050="" id="el-dialog-edit" class="dialog-containter containter-skin"
                     style="width: 462px; min-height: 210px; display: none;">
                    <div data-v-2a98e4d1="" class="containter-top">
                        <div data-v-693a9050="" data-v-2a98e4d1="">
                            <span data-v-693a9050="" data-v-2a98e4d1="">编辑收藏夹</span>
                        </div>
                    </div>
                    <div data-v-2a98e4d1="" class="containter-content">
                        <div data-v-693a9050="" data-v-2a98e4d1="">
                            <form data-v-693a9050="" class="el-form el-form-skin" data-v-2a98e4d1="">
                                <div data-v-693a9050="" class="form-control clearfix">
                                    <label data-v-693a9050="" class="form-label">标题</label>
                                    <div data-v-693a9050="" class="el-form-item is-required"><!---->
                                        <div class="el-form-item__content">
                                            <div data-v-693a9050="" class="form-input el-input"><!---->
                                                <input type="text" autocomplete="off" placeholder="请填写收藏夹的名称"
                                                       class="el-input__inner" id="favorites_title_edit">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div data-v-693a9050="" class="form-control clearfix">
                                    <label data-v-693a9050="" class="form-label">描述（选填）</label>
                                    <div data-v-693a9050="" class="el-form-item">
                                        <div class="el-form-item__content">
                                            <div data-v-693a9050="" class="form-textarea el-textarea">
                                                <textarea autocomplete="off" rows="4" placeholder="请输入描述内容"
                                                          class="el-textarea__inner" style="min-height: 39px;"
                                                          id="favorites_desc_edit"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div data-v-2a98e4d1="" class="containter-bottom">
                        <div data-v-693a9050="" data-v-2a98e4d1="" class="form-button">
                            <button data-v-693a9050="" data-v-2a98e4d1="" id="btn-reset-edit" class="btn">取消</button>
                            <button data-v-693a9050="" data-v-2a98e4d1="" id="btn-confirm-edit" class="btn primary-btn" onclick="updateFavorites()"> 确定 </button>
                        </div>
                    </div>
                </div>
                <div class="dialog-mark" id="dialog-mark-edit" style="display: none"></div>
                <!--修改收藏夹信息结束-->

            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" type="text/css" href="./css/pub-footer.css">
<div class="bottom-pub-footer footer-box pub_fo" id="foot"></div>

</body>

<script src="jquery/jquery-2.1.1.min.js"></script>
<script>
    $("#head").load("module/bk_header.html");
    $("#left").load("module/personal_left.html", function () {
        $("#collect").attr("class", "router-link-exact-active router-link-active");
    });
    // $("#foot").load("module/personal_foot.html");
    //打开新增收藏夹页面
    function insertCollectOnclick() {
        $("#el-dialog").css("display", "block");
        $("#dialog-mark").css("display", "block");
    }
    //收藏夹id
    var favorites_id;
    //添加收藏夹信息到修改页面
    function editCollectOnclick(favoritesId) {
        favorites_id = favoritesId;
        $("#el-dialog-edit").css("display", "block");
        $("#dialog-mark-edit").css("display", "block");

        var url = "selectFavoritesId";
        var value = {
            "favoritesId" : favoritesId
        };
        $.post(url,value,function (data) {
            $("#favorites_title_edit").val(data.favorites_title);
            $("#favorites_desc_edit").val(data.favorites_desc);
        })
    }
    //修改收藏夹信息
    function updateFavorites() {
        var url = "updateFavorites";
        var favorites = {
            "favorites_id" : favorites_id,
            "favorites_title" : $("#favorites_title_edit").val(),
            "favorites_desc" :$("#favorites_desc_edit").val()
        };
        $.post(url,favorites,function (data) {
            if (data === "true") {
                window.location.reload();
            } else {
                alert(data);
            }
        })
    }
    //新增收藏夹
    function insertFavorites() {
        var url = "insertFavorites";
        var favorites = {
            "favorites_title": $("#favorites_title").val(),
            "favorites_desc": $("#favorites_desc").val()
        };
        $.post(url, favorites, function (data) {
            if (data === "true") {
                window.location.reload();
            } else {
                alert(data);
            }
        });
    }
    //删除收藏夹
    function deleteFavorites(favorites_id){
        var url = "deleteFavorites";
        var value = {
            "favoritesId" : favorites_id
        };
        $.post(url,value,function (data) {
            if (data === true) {
                alert("删除成功");
                window.location.reload();
            } else {
                alert("删除失败");
            }
        })
    }
    //不显示新增收藏夹页面
    $("#btn-reset").click(function () {
        $("#el-dialog").css("display", "none");
        $("#dialog-mark").css("display", "none");
    });
    //不显示修改收藏夹页面
    $("#btn-reset-edit").click(function () {
        $("#el-dialog-edit").css("display", "none");
        $("#dialog-mark-edit").css("display", "none");
    });

    //请求收藏夹信息
    $(function () {
        var url = "selectFavoritesByUserId";
        $.post(url, function (data) {
            $(data).each(function (index, item) {
                var innerHtml = "<li data-v-198f248e=\"\" onclick='favoritesClick(" + item.favorites.favorites_id + ")'>" +
                    "                            <span data-v-198f248e=\"\" class=\"collection-dir\">" +
                    "                            <em data-v-198f248e=\"\" data-id=\"36868\">" + item.favorites.favorites_title + "</em>" +
                    "                            </span>" +
                    "                            <span data-v-198f248e=\"\" class=\"collection-info\">" +
                    "                                <b data-v-198f248e=\"\" class=\"line\">" + item.contents + "条内容</b>" +
                    "                                <b data-v-198f248e=\"\">" + item.attentions + "人关注</b>" +
                    "                            </span>" +
                    "                            <button data-v-198f248e=\"\" href=\"#\" data-id=\"36868\" class=\"collect-see\" ></button>" +
                    "                        </li>";
                $("#favorites").append(innerHtml);
            })
        })
    });

    //    点击收藏夹事件
    function favoritesClick(favorites_id) {
        var url = "selectFavoritesByFavoritesId";
        var value = {
            "favorites_id": favorites_id
        };
        $.get(url, value, function (data) {
            $(data).each(function (index, item) {
                var innerHtml = "<li data-v-7afe6b7e=\"\" data-parentid=\"36868\">" +
                    "                                    <span data-v-7afe6b7e=\"\" class=\"collection-dir collection-font collection-detail\"> " + item.favorites.favorites_title + " </span>" +
                    "                                    <span data-v-7afe6b7e=\"\" class=\"collection-info collection-detail\">\n" +
                    "                                        <p data-v-7afe6b7e=\"\" class=\"collection-text collection-detail\">收藏夹描述： " + item.favorites.favorites_desc + "</p>" +
                    "                                        <b data-v-7afe6b7e=\"\" class=\"line\">" + item.collectVoList.length + "条内容</b>" +
                    "                                        <b data-v-7afe6b7e=\"\" class=\"line\">0人关注</b>" +
                    "                                        <em data-v-7afe6b7e=\"\" class=\"cursor line\" onclick='editCollectOnclick(" + item.favorites.favorites_id + ")'>编辑</em>" +
                    "                                        <em data-v-7afe6b7e=\"\" class=\"cursor\" onclick='deleteFavorites(" + item.favorites.favorites_id + ")'>删除</em>" +
                    "                                    </span>" +
                    "                         <ul data-v-7afe6b7e=\"\" class=\"collection-sublist\">" +
                    "                                        <li data-v-7afe6b7e=\"\" data-id=\"25518081\" data-parentid=\"36866\" class=\"\">";
                $(item.collectVoList).each(function (index, values) {
                    innerHtml += "                                   <div data-v-7afe6b7e=\"\" class=\"collection-con\">" +
                        "                            <span data-v-7afe6b7e=\"\">" +
                        "                            <span data-v-7afe6b7e=\"\" class=\"collection-dir\">" +
                        "                            <a data-v-7afe6b7e=\"\" href=\"#\" target=\"_blank\" class=\"subtitle\">" + values.blogInfo.blog_title + "</a>" +
                        "                            </span>" +
                        "                            <a data-v-7afe6b7e=\"\" href=\"\" data-id=\"25518081\"" +
                        "                               data-parentid=\"36866\" class=\"collect-cancel\">取消收藏</a>" +
                        "                            </span>" +
                        "                                                <span data-v-7afe6b7e=\"\" class=\"collection-info\">" +
                        "                            <em data-v-7afe6b7e=\"\" class=\"line\"></em>" +
                        "                            <b data-v-7afe6b7e=\"\">" + values.collect.collect_time + "</b>" +
                        "                            </span>" +
                        "                                            </div>";
                });
                innerHtml += "                                  </li>" +
                    "                            </ul>" +
                    "             </li>";

                // alert(innerHtml);
                $("#favoritesShow").css("display", "none");
                $("#collectShow").css("display", "block");
                $("#favorites").empty();
                $("#favorites").append(innerHtml);
            });


        });
    }
</script>
</html>