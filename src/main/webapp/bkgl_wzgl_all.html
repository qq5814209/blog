<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="referrer" content="always">
    <title>类别管理-CSDN博客</title>
    <link rel="stylesheet" href="./css/content_toolbar.css">
    <link href="css/commons.0347115.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./css/check-adb.css">
</head>
<body>
<div id="csdn-toolbar" class="csdn-toolbar tb_disnone  csdn-toolbar-skin-black ">
</div>
<link href="css/articleList.546296b.css" rel="stylesheet">
<main role="main" class="container">
    <div class="row row-offcanvas row-offcanvas-right main-wrapper" id="left_menu">
        <div class="col-6 col-md-2 sidebar-offcanvas" id="sidebar">
        </div>

        <div class="col-12 col-md-10" id="content-body">
            <div class="main-nav-tabs">
                <ul class="nav nav-pills" id="pills-tab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" href="bkgl_wzgl_all.html" role="tab"
                           aria-controls="pills-home" aria-selected="true">全部(6)
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="bkgl_wzgl_public.html" role="tab"
                           aria-controls="pills-profile" aria-selected="false">公开(6)
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="bkgl_wzgl_private.html" role="tab"
                           aria-controls="pills-profile" aria-selected="false">私密(3)
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="bkgl_wzgl_drafts.html" role="tab"
                           aria-controls="pills-contact" aria-selected="false">草稿箱(1)
                        </a>
                    </li>
                    <!--<li class="nav-item">
                        <a class="nav-link " href="#" role="tab"
                           aria-controls="pills-contact" aria-selected="false">
                            回收站(0)
                        </a>
                    </li>-->
                </ul>
            </div>
            <div class="main-search-box">
                <form class="mt-2 mt-md-0 main-nav-tab-search search_input"
                      action="#">
                    <div class="dropdown year float-left mr8 default-val">
                        <label>筛选：</label>
                        <!--<button class="btn btn-sm btn-dropdown dropdown-toggle" type="button" id="droYear"-->
                                <!--data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-->
                            <!--年-->
                        <!--</button>-->
                        <input type="hidden" value="all" class="list_status">
                        <input type="hidden" value="" id="year" name="year">
                        <div class="dropdown-menu" aria-labelledby="droYear">
                            <a class="dropdown-item yearOption" data-val="">不限</a>
                            <a class="dropdown-item yearOption" data-val="2019">2019</a>
                        </div>
                    </div>
                    <div class="dropdown month float-left default-val mr32">
                        <!--<button class="btn btn-sm btn-dropdown dropdown-toggle" type="button" id="droMonth"-->
                                <!--data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-->
                            <!--月-->
                        <!--</button>-->
                        <input type="hidden" value="" id="month" name="month">
                        <div class="dropdown-menu months-list" aria-labelledby="droMonth">
                            <a class="dropdown-item" data-val="">不限</a>
                        </div>
                    </div>
                    <div class="dropdown type float-left default-val mr16">
                        <button class="btn btn-sm btn-dropdown dropdown-toggle" type="button" id="droType"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            文章类型
                        </button>
                        <input type="hidden" value="" id="type" name="type">
                        <div class="dropdown-menu" aria-labelledby="droType">
                            <a class="dropdown-item" data-val="">不限类型</a>
                            <a class="dropdown-item" data-val="1">原创</a>
                            <a class="dropdown-item" data-val="2">转载</a>
                            <a class="dropdown-item" data-val="4">翻译</a>
                        </div>
                    </div>
                    <div class="dropdown categorie float-left default-val mr32">
                        <button class="btn btn-sm btn-dropdown dropdown-toggle " type="button" id="droCategorie"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            个人分类
                        </button>
                        <input type="hidden" value="" id="categorie" name="cate">
                        <div class="dropdown-menu" aria-labelledby="droCategorie">
                            <a class="dropdown-item" data-val="">不限</a>

                            <a class="dropdown-item" data-val="8818572">JavaWeb</a>
                            <a class="dropdown-item" data-val="8818595">HTML基础</a>
                            <a class="dropdown-item" data-val="8818889">idea知识积累</a>
                            <a class="dropdown-item" data-val="8924745">Maven</a>
                            <a class="dropdown-item" data-val="8938601">mybatis</a>
                            <a class="dropdown-item" data-val="8938602">懒加载</a>
                            <a class="dropdown-item" data-val="none">未分类</a>

                        </div>
                    </div>
                    <input class="txt-keyword mr24" id="key" type="text" name="keyword" value="" placeholder="请输入标题关键词"
                           aria-label="Search">
                    <button type="button" class="btn btn-danger btn-mp-search float-right" onclick="searchmyblog()">搜索</button>
                </form>
            </div>
            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show article-list active" id="feedlist_id" role="tabpanel"
                     aria-labelledby="pills-home-tab">
                    <!--<div class="article-list-item">-->
                        <!--<div class="list-item-title">-->
                            <!--<span class="article-list-item-tag">草稿</span>-->


                            <!--<p class="article-list-item-txt">-->
                                <!--<a href="#" target="_blank" title="编辑">asdasdsad</a>-->
                            <!--</p>-->
                        <!--</div>-->
                        <!--<div class="article-list-item-info">-->
                            <!--<div class="item-info-left">-->
                                        <!--<span class="">-->
                                                                                            <!--原创                                                                                    </span>-->
                                <!--<span class="">2019年06月12日 10:42:05</span>-->
                                <!--<span class="">-->
                                            <!--<svg class="icon icon-read">-->
                                                <!--<use xlink:href="#read"></use>-->
                                            <!--</svg>-->
                                            <!--0                                        </span>-->
                                <!--<span class="">-->
                                            <!--<svg class="icon icon-comment">-->
                                                <!--<use xlink:href="#comment"></use>-->
                                            <!--</svg>-->
                                            <!--0                                        </span>-->
                            <!--</div>-->
                            <!--<div class="item-info-oper">-->
                                <!--<a href="#" target="_blank"><span-->
                                        <!--class="">查看</span></a>-->


                                <!--<a href="javascript:void(0);" data-aid="91491293"><span class="del">删除</span></a>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</div>-->

                </div>

            </div>
            <!-- 分页 -->
            <div class="row" style="text-align:center">
                <ul class="pagination" id="pagination">
                    <li id="btns">

                    </li>
                </ul>
                <p class="text-primary">当前第:<span id="currentPage"></span>页 共计<span
                        id="totalPage"></span>页&nbsp;&nbsp;&nbsp;<input type="text" id="t" style="width: 25px;height: 22px">
                    <button class="btn-primary" onclick='goto()'>跳转</button>
                </p>
                <p class="text-primary">总记录数:<span id="totalNums"></span></p>
            </div>
        </div>
    </div>
</main>
</body>
<script src="jquery/jquery-2.1.1.min.js"></script>
<script src="bootstrap-3.3.7-dist/js/bootstrap.min.js" type="text/javascript"></script>
<script>
    $("#sidebar").load("module/bkgl_left_menu.html", function () {
        $("#bkgl_wzgl").attr("class", "list-group-item active");
    });
    $("#csdn-toolbar").load("module/bk_header.html");

    /*
    * 页面初始化
    * */
    $(function () {
        begin(1,5);
    });



    /*
    * 页面初始化并展示
    * */
    function begin(currentPage,pageSize) {
        $("#btns").find("button").remove();
        $("#feedlist_id").empty("");
        $.ajax({
            type: 'POST',
            url: "getBlogsByUserId",
            contentType:"application/json;charse=UTF-8",
            data: JSON.stringify({
                "currentPage":currentPage,
                "pageSize":pageSize
            }),
            success: function(data){
                console.log(data);
                //循环
                var tabObj2 = $("#feedlist_id");
                tabObj2.empty();
                for (var i = 0; i < data.list.length; i++) {

                    var trHtml2 = " <div class=\"article-list-item\">\n" +
                        "        <div class=\"list-item-title\">\n" +
                        "\n" +
                        "\n" +
                        "        <p class=\"article-list-item-txt\">\n" +
                        "        <a href=\"#\" target=\"_self\" title=\"编辑\"><font style=\"vertical-align: inherit;\" onclick=toJump(" + data.list[i].user_id + "," + data.list[i].blog_id + ")><font style=\"vertical-align: inherit;\">"+data.list[i].blog_title+"</font></font></a>\n" +
                        "    </p>\n" +
                        "    </div>\n" +
                        "    <div class=\"article-list-item-info\">\n" +
                        "        <div class=\"item-info-left\">\n" +
                        "        <span class=\"\"><font style=\"vertical-align: inherit;\"><font style=\"vertical-align: inherit;\">\n" +
                        "        原创                                                                                     </font></font></span>\n" +
                        "    <span class=\"\"><font style=\"vertical-align: inherit;\"><font style=\"vertical-align: inherit;\">"+data.list[i].create_time+"</font></font></span>\n" +
                        "    <font style=\"vertical-align: inherit;\"><span class=\"\"><font style=\"vertical-align: inherit;\">\n" +
                        "        "+data.list[i].cnumber+"                                      </font></span><span class=\"\"><font style=\"vertical-align: inherit;\">\n" +
                        "        "+data.list[i].bnumber+"                                      </font></span></font><span class=\"\">\n" +
                        "    <svg class=\"icon icon-read\">\n" +
                        "        <use xlink:href=\"#read\"></use>\n" +
                        "        </svg><font style=\"vertical-align: inherit;\"></font></span>\n" +
                        "    <span class=\"\">\n" +
                        "        <svg class=\"icon icon-comment\">\n" +
                        "        <use xlink:href=\"#comment\"></use>\n" +
                        "        </svg><font style=\"vertical-align: inherit;\"></font></span>\n" +
                        "    </div>\n" +
                        "    <div class=\"item-info-oper\">\n" +
                        "        <a href=\"#\" target=\"_self\" onclick=toJump(" + data.list[i].user_id + "," + data.list[i].blog_id + ")><span class=\"\"><font style=\"vertical-align: inherit;\"><font style=\"vertical-align: inherit;\">查看</font></font></span></a>\n" +
                        "    <font style=\"vertical-align: inherit;\"><span class=\"\"><a href=\"javascript:void(0);\" class=\"managecomment\" data-aid=\"90106943\" data-opt=\"lock\"><font style=\"vertical-align: inherit;\">禁止评论\n" +
                        "        </font></a></span><a href=\"#\" data-aid=\"90106943\"><span class=\"setTop\" data-opt=\"true\"><font style=\"vertical-align: inherit;\">置顶</font></span></a><a href=\"#\" data-aid=\"90106943\" onclick='delblog("+data.list[i].blog_id+")'><span class=\"del\"><font style=\"vertical-align: inherit;\">删除</font></span></a></font><input type=\"hidden\" value=\"90106943\" class=\"articleid\">\n" +
                        "        <span class=\"\">\n" +
                        "        <a href=\"javascript:void(0);\" class=\"managecomment\" data-aid=\"90106943\" data-opt=\"lock\"><font style=\"vertical-align: inherit;\"></font></a>\n" +
                        "    </span>\n" +
                        "\n" +
                        "    <a href=\"#\" data-aid=\"90106943\"><span class=\"setTop\" data-opt=\"true\"><font style=\"vertical-align: inherit;\"></font></span></a>\n" +
                        "\n" +
                        "    <a href=\"#\" data-aid=\"90106943\"><span class=\"del\"><font style=\"vertical-align: inherit;\"></font></span></a>\n" +
                        "    </div>\n" +
                        "    </div>\n" +
                        "    </div>\n";
                    tabObj2.append(trHtml2);
                }

                //动态生成页数
                for (var i = 0; i < data.pages; i++) {
                    if (i == 0) {
                        //首页
                        var buttonFirst = $("<button onclick='goNormal(" + data.firstPage + ")' class='btn-primary'>首页</button>");
                        //是否存有上页
                        if (data.pageNum == 1) {
                            var buttonPrep = $("<button onclick='goNormal(" + data.prePage + ")' class=\"btn-primary\" disabled='disabled'>上一页</button>")
                        } else {
                            var buttonPrep = $("<button onclick='goNormal(" + data.prePage + ")' class=\"btn-primary\">上一页</button>")
                        }
                        $("#btns").append(buttonFirst);
                        $("#btns").append(buttonPrep);
                    }
                    if (i == data.pageNum - 1) {
                        var button = $("<button onclick='goNormal(" + (i + 1) + ")' class=\"btn-success\">" + (i + 1) + "</button>")
                    } else {
                        var button = $("<button onclick='goNormal(" + (i + 1) + ")' class=\"btn-primary\">" + (i + 1) + "</button>")
                    }
                    $("#btns").append(button);
                    if (i == data.lastPage - 1) {
                        //尾页
                        var buttonEnd = $("<button onclick='goNormal(" + data.lastPage + ")' class=\"btn-primary\">尾页</button>");
                        if (data.pageNum == data.lastPage) {
                            var buttonNext = $("<button onclick='goNormal(" + data.nextPage + ")' class=\"btn-primary\" disabled='disabled'>下一页</button>")
                        } else {
                            var buttonNext = $("<button onclick='goNormal(" + data.nextPage + ")' class=\"btn-primary\">下一页</button>")
                        }
                        $("#btns").append(buttonNext);
                        $("#btns").append(buttonEnd);
                    }

                }
                //当前页数
                $("#currentPage").html(data.pageNum);
                //总页数
                $("#totalPage").html(data.lastPage);
                //总记录数
                $("#totalNums").html(data.total);
            },
            error:function (data) {
                console.error(data);
            },
            dataType: "json"
        });
    }

    /*
    * 跳转到哪一页
    * */
    function goto() {
        $("#feedlist_id").empty("");
        $("#btns").find("button").remove();
        begin($("#t").val(), 5);
    }

    /*
    * 下一页
    * */
    function goNormal(n) {
        $("#feedlist_id").empty("");
        $("#btns").find("button").remove();
        begin(n,5);
    }

    /*
    * 删除博客
    * */
    function delblog(blog_id) {
        $.ajax({
            type: 'POST',
            url: "deleteBlogbyBlog_id",
            contentType:"application/json;charse=UTF-8",
            data: JSON.stringify({
                "blog_id":blog_id,
                "pageSize":"",
                "currentPage":""

            }),
            success: function(data){
                alert("刪除成功");
            },
            error:function (data) {
                console.error(data);
            },
            dataType: "json"
        });
    }

    function searchmyblog() {
        var blog_title ="";
        var blog_content ="";
        blog_title = $("#key").val();
        blog_content = $("#key").val();
        $.ajax({
            type: 'POST',
            url: "searchMyBlogs",
            contentType:"application/json;charse=UTF-8",
            data: JSON.stringify({
                "blog_content":blog_content,
                "blog_title":blog_title
            }),
            success: function(data){
                var tabObj2 = $("#feedlist_id");
                tabObj2.empty();
                for (var i = 0; i < data.list.length; i++) {

                    var trHtml2 = " <div class=\"article-list-item\">\n" +
                        "        <div class=\"list-item-title\">\n" +
                        "\n" +
                        "\n" +
                        "        <p class=\"article-list-item-txt\">\n" +
                        "        <a href=\"#\" target=\"_self\" title=\"编辑\"><font style=\"vertical-align: inherit;\" onclick=toJump(" + data.list[i].user_id + "," + data.list[i].blog_id + ")><font style=\"vertical-align: inherit;\">"+data.list[i].blog_title+"</font></font></a>\n" +
                        "    </p>\n" +
                        "    </div>\n" +
                        "    <div class=\"article-list-item-info\">\n" +
                        "        <div class=\"item-info-left\">\n" +
                        "        <span class=\"\"><font style=\"vertical-align: inherit;\"><font style=\"vertical-align: inherit;\">\n" +
                        "        原创                                                                                     </font></font></span>\n" +
                        "    <span class=\"\"><font style=\"vertical-align: inherit;\"><font style=\"vertical-align: inherit;\">"+data.list[i].create_time+"</font></font></span>\n" +
                        "    <font style=\"vertical-align: inherit;\"><span class=\"\"><font style=\"vertical-align: inherit;\">\n" +
                        "        "+data.list[i].cnumber+"                                      </font></span><span class=\"\"><font style=\"vertical-align: inherit;\">\n" +
                        "        "+data.list[i].bnumber+"                                      </font></span></font><span class=\"\">\n" +
                        "    <svg class=\"icon icon-read\">\n" +
                        "        <use xlink:href=\"#read\"></use>\n" +
                        "        </svg><font style=\"vertical-align: inherit;\"></font></span>\n" +
                        "    <span class=\"\">\n" +
                        "        <svg class=\"icon icon-comment\">\n" +
                        "        <use xlink:href=\"#comment\"></use>\n" +
                        "        </svg><font style=\"vertical-align: inherit;\"></font></span>\n" +
                        "    </div>\n" +
                        "    <div class=\"item-info-oper\">\n" +
                        "        <a href=\"#\" target=\"_self\" onclick=toJump(" + data.list[i].user_id + "," + data.list[i].blog_id + ")><span class=\"\"><font style=\"vertical-align: inherit;\"><font style=\"vertical-align: inherit;\">查看</font></font></span></a>\n" +
                        "    <font style=\"vertical-align: inherit;\"><span class=\"\"><a href=\"javascript:void(0);\" class=\"managecomment\" data-aid=\"90106943\" data-opt=\"lock\"><font style=\"vertical-align: inherit;\">禁止评论\n" +
                        "        </font></a></span><a href=\"#\" data-aid=\"90106943\"><span class=\"setTop\" data-opt=\"true\"><font style=\"vertical-align: inherit;\">置顶</font></span></a><a href=\"#\" data-aid=\"90106943\" onclick='delblog("+data.list[i].blog_id+")'><span class=\"del\"><font style=\"vertical-align: inherit;\">删除</font></span></a></font><input type=\"hidden\" value=\"90106943\" class=\"articleid\">\n" +
                        "        <span class=\"\">\n" +
                        "        <a href=\"javascript:void(0);\" class=\"managecomment\" data-aid=\"90106943\" data-opt=\"lock\"><font style=\"vertical-align: inherit;\"></font></a>\n" +
                        "    </span>\n" +
                        "\n" +
                        "    <a href=\"#\" data-aid=\"90106943\"><span class=\"setTop\" data-opt=\"true\"><font style=\"vertical-align: inherit;\"></font></span></a>\n" +
                        "\n" +
                        "    <a href=\"#\" data-aid=\"90106943\"><span class=\"del\"><font style=\"vertical-align: inherit;\"></font></span></a>\n" +
                        "    </div>\n" +
                        "    </div>\n" +
                        "    </div>\n";
                    tabObj2.append(trHtml2);
                }
            },
            error:function (data) {
                console.error(data);
            },
            dataType: "json"
        });
    }

    /*
    * 跳转到bk_list.html
    * */
    function toJump(a,b) {
        window.location.href="bk_list.html?userId="+a+"&blogId="+b;
    }
</script>
</html>